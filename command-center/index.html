
    const { useState, useEffect, useRef } = React;

    function CommandCenter() {
      const [events, setEvents] = useState({});
      const [messages, setMessages] = useState([
        { role: 'assistant', content: "G'day mate! I'm your Command Center AI. I'll help you plan your year, manage your projects, and keep everything on track. What's on your mind?" }
      ]);
      const [inputMessage, setInputMessage] = useState('');
      const [isLoading, setIsLoading] = useState(false);
      const chatEndRef = useRef(null);

      useEffect(() => {
        // Load saved data from localStorage
        const savedEvents = localStorage.getItem('commandCenterEvents');
        if (savedEvents) {
          setEvents(JSON.parse(savedEvents));
        }
      }, []);

      useEffect(() => {
        // Save events to localStorage whenever they change
        localStorage.setItem('commandCenterEvents', JSON.stringify(events));
      }, [events]);

      useEffect(() => {
        // Scroll to bottom of chat
        chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      }, [messages]);

      const months = [
        'January', 'February', 'March', 'April', 'May', 'June',
        'July', 'August', 'September', 'October', 'November', 'December'
      ];

      const getDaysInMonth = (year, month) => {
        return new Date(year, month + 1, 0).getDate();
      };

      const getFirstDayOfMonth = (year, month) => {
        return new Date(year, month, 1).getDay();
      };

      const today = new Date();
      const currentYear = 2025;

      const handleDayClick = (month, day) => {
        const dateKey = `${currentYear}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const eventTitle = prompt(`Add event for ${months[month]} ${day}:`);
        if (eventTitle) {
          setEvents(prev => ({
            ...prev,
            [dateKey]: [...(prev[dateKey] || []), eventTitle]
          }));
        }
      };

      const sendMessage = async () => {
        if (!inputMessage.trim() || isLoading) return;

        const userMessage = inputMessage.trim();
        setInputMessage('');
        setMessages(prev => [...prev, { role: 'user', content: userMessage }]);
        setIsLoading(true);

        try {
          const response = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'x-api-key': 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
              'anthropic-version': '2023-06-01'
            },
            body: JSON.stringify({
              model: 'claude-sonnet-4-20250514',
              max_tokens: 1000,
              system: `You are Aka's personal AI assistant in his Command Center app. You help him manage his life, including:
- ArtaFishal app development (fishing intelligence app for Mackay, QLD)
- Dad life and family time
- Videography business jobs
- Content filming
- Personal projects and goals for 2025

Be casual, Australian, supportive, and help him stay organized. You can add events to his calendar by saying "I'll add that to your calendar" and he can manually add them. Keep responses concise and actionable.`,
              messages: messages.concat([{ role: 'user', content: userMessage }])
            })
          });

          const data = await response.json();
          const assistantMessage = data.content[0].text;
          
          setMessages(prev => [...prev, { role: 'assistant', content: assistantMessage }]);
        } catch (error) {
          setMessages(prev => [...prev, { 
            role: 'system', 
            content: 'Error connecting to AI. Make sure you\'ve added your Claude API key in the code.' 
          }]);
        }

        setIsLoading(false);
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      };

      // Calculate some quick stats
      const totalEvents = Object.values(events).reduce((sum, arr) => sum + arr.length, 0);
      const daysWithEvents = Object.keys(events).length;

      return (
        <div className="app">
          <div className="calendar-section">
            <div className="header">
              <h1>Command Center</h1>
              <div className="date">
                {today.toLocaleDateString('en-AU', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
              </div>
            </div>

            <div className="quick-stats">
              <h3>2025 Overview</h3>
              <div className="stat-item">
                <span className="stat-label">Total Events</span>
                <span className="stat-value">{totalEvents}</span>
              </div>
              <div className="stat-item">
                <span className="stat-label">Days Scheduled</span>
                <span className="stat-value">{daysWithEvents}</span>
              </div>
              <div className="stat-item">
                <span className="stat-label">Days Remaining</span>
                <span className="stat-value">{Math.ceil((new Date('2025-12-31') - today) / (1000 * 60 * 60 * 24))}</span>
              </div>
            </div>

            <div className="year-calendar">
              {months.map((monthName, monthIndex) => {
                const daysInMonth = getDaysInMonth(currentYear, monthIndex);
                const firstDay = getFirstDayOfMonth(currentYear, monthIndex);
                const days = [];

                // Add empty cells for days before month starts
                for (let i = 0; i < firstDay; i++) {
                  days.push(<div key={`empty-${i}`} className="day empty"></div>);
                }

                // Add actual days
                for (let day = 1; day <= daysInMonth; day++) {
                  const dateKey = `${currentYear}-${String(monthIndex + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                  const hasEvent = events[dateKey] && events[dateKey].length > 0;
                  const isToday = today.getDate() === day && 
                                 today.getMonth() === monthIndex && 
                                 today.getFullYear() === currentYear;

                  days.push(
                    <div 
                      key={day}
                      className={`day ${isToday ? 'today' : ''} ${hasEvent ? 'has-event' : ''}`}
                      onClick={() => handleDayClick(monthIndex, day)}
                      title={hasEvent ? events[dateKey].join(', ') : 'Click to add event'}
                    >
                      {day}
                      {hasEvent && <div className="event-dot"></div>}
                    </div>
                  );
                }

                return (
                  <div key={monthName} className="month">
                    <div className="month-name">{monthName}</div>
                    <div className="days-grid">
                      {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((d, i) => (
                        <div key={i} className="day-label">{d}</div>
                      ))}
                      {days}
                    </div>
                  </div>
                );
              })}
            </div>
          </div>

          <div className="sidebar">
            <div className="chat-header">
              <h2>AI Assistant</h2>
              <p>Your personal planning partner</p>
            </div>

            <div className="chat-messages">
              {messages.map((msg, idx) => (
                <div key={idx} className={`message ${msg.role}`}>
                  {msg.content}
                </div>
              ))}
              {isLoading && (
                <div className="message assistant">Thinking...</div>
              )}
              <div ref={chatEndRef} />
            </div>

            <div className="chat-input-area">
              <div className="chat-input">
                <input
                  type="text"
                  value={inputMessage}
                  onChange={(e) => setInputMessage(e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder="Ask me anything or add a task..."
                  disabled={isLoading}
                />
                <button onClick={sendMessage} disabled={isLoading}>
                  Send
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.render(<CommandCenter />, document.getElementById('root'));
  

